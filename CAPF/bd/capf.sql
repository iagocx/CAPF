-- MySQL Script generated by MySQL Workbench
-- Fri Nov 25 01:41:04 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema capf
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `capf` ;

-- -----------------------------------------------------
-- Schema capf
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `capf` DEFAULT CHARACTER SET utf8 ;
USE `capf` ;

-- -----------------------------------------------------
-- Table `capf`.`Usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Usuario` ;

CREATE TABLE IF NOT EXISTS `capf`.`Usuario` (
  `cpf` BIGINT(11) NOT NULL,
  `nome` VARCHAR(45) NULL,
  `usuario` VARCHAR(45) NULL,
  `senha` VARCHAR(45) NULL,
  `tipo` INT(5) NULL,
  `creci` INT(20) NULL,
  `email` VARCHAR(45) NULL,
  PRIMARY KEY (`cpf`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `capf`.`Franqueado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Franqueado` ;

CREATE TABLE IF NOT EXISTS `capf`.`Franqueado` (
  `id_franqueado` INT NOT NULL AUTO_INCREMENT,
  `nome_responsavel` VARCHAR(45) NULL,
  `nome_franquia` VARCHAR(45) NULL,
  `numero` INT NULL,
  `endereco` VARCHAR(45) NULL,
  `tel_franquia` INT NULL,
  `tel_responsavel` INT NULL,
  `cep` INT NULL,
  PRIMARY KEY (`id_franqueado`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `nome_franquia_UNIQUE` ON `capf`.`Franqueado` (`nome_franquia` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`Adm`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Adm` ;

CREATE TABLE IF NOT EXISTS `capf`.`Adm` (
  `Usuario_cpf` BIGINT(11) NOT NULL,
  PRIMARY KEY (`Usuario_cpf`),
  CONSTRAINT `fk_Adm_Usuario1`
    FOREIGN KEY (`Usuario_cpf`)
    REFERENCES `capf`.`Usuario` (`cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `capf`.`RegiaoFranquia`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`RegiaoFranquia` ;

CREATE TABLE IF NOT EXISTS `capf`.`RegiaoFranquia` (
  `id_RegiaoFranquiacol` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `Adm_Usuario_cpf` BIGINT(11) NULL,
  PRIMARY KEY (`id_RegiaoFranquiacol`),
  CONSTRAINT `fk_RegiaoFranquia_Adm1`
    FOREIGN KEY (`Adm_Usuario_cpf`)
    REFERENCES `capf`.`Adm` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_RegiaoFranquia_Adm1_idx` ON `capf`.`RegiaoFranquia` (`Adm_Usuario_cpf` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`UsuarioMasterFranqueado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`UsuarioMasterFranqueado` ;

CREATE TABLE IF NOT EXISTS `capf`.`UsuarioMasterFranqueado` (
  `Usuario_cpf` BIGINT(11) NOT NULL,
  `Adm_Usuario_cpf` BIGINT(11) NOT NULL,
  PRIMARY KEY (`Usuario_cpf`),
  CONSTRAINT `fk_UsuarioMasterFranqueado_Usuario1`
    FOREIGN KEY (`Usuario_cpf`)
    REFERENCES `capf`.`Usuario` (`cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_UsuarioMasterFranqueado_Adm1`
    FOREIGN KEY (`Adm_Usuario_cpf`)
    REFERENCES `capf`.`Adm` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_UsuarioMasterFranqueado_Adm1_idx` ON `capf`.`UsuarioMasterFranqueado` (`Adm_Usuario_cpf` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`MasterFranquia`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`MasterFranquia` ;

CREATE TABLE IF NOT EXISTS `capf`.`MasterFranquia` (
  `Franqueado_id_franqueado` INT NOT NULL,
  `RegiaoFranquia_id_RegiaoFranquiacol` INT NOT NULL,
  `UsuarioMasterFranqueado_Usuario_cpf` BIGINT(11) NOT NULL,
  PRIMARY KEY (`Franqueado_id_franqueado`),
  CONSTRAINT `fk_MasterFranquia_Franqueado1`
    FOREIGN KEY (`Franqueado_id_franqueado`)
    REFERENCES `capf`.`Franqueado` (`id_franqueado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MasterFranquia_RegiaoFranquia1`
    FOREIGN KEY (`RegiaoFranquia_id_RegiaoFranquiacol`)
    REFERENCES `capf`.`RegiaoFranquia` (`id_RegiaoFranquiacol`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MasterFranquia_UsuarioMasterFranqueado1`
    FOREIGN KEY (`UsuarioMasterFranqueado_Usuario_cpf`)
    REFERENCES `capf`.`UsuarioMasterFranqueado` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_MasterFranquia_RegiaoFranquia1_idx` ON `capf`.`MasterFranquia` (`RegiaoFranquia_id_RegiaoFranquiacol` ASC) ;

CREATE INDEX `fk_MasterFranquia_UsuarioMasterFranqueado1_idx` ON `capf`.`MasterFranquia` (`UsuarioMasterFranqueado_Usuario_cpf` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`CategoriaKpi`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`CategoriaKpi` ;

CREATE TABLE IF NOT EXISTS `capf`.`CategoriaKpi` (
  `id_categoria` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NULL,
  `MasterFranquia_Franqueado_id_franqueado` INT NOT NULL,
  PRIMARY KEY (`id_categoria`),
  CONSTRAINT `fk_CategoriaKpi_MasterFranquia1`
    FOREIGN KEY (`MasterFranquia_Franqueado_id_franqueado`)
    REFERENCES `capf`.`MasterFranquia` (`Franqueado_id_franqueado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_CategoriaKpi_MasterFranquia1_idx` ON `capf`.`CategoriaKpi` (`MasterFranquia_Franqueado_id_franqueado` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`Kpi`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Kpi` ;

CREATE TABLE IF NOT EXISTS `capf`.`Kpi` (
  `id_kpi` INT NOT NULL AUTO_INCREMENT,
  `tipo` VARCHAR(1) NULL DEFAULT 'V',
  `nome` VARCHAR(45) NULL,
  `valorMeta` DECIMAL NULL,
  `CategoriaKpi_id_categoria` INT NOT NULL,
  `MasterFranquia_Franqueado_id_franqueado` INT NOT NULL,
  PRIMARY KEY (`id_kpi`),
  CONSTRAINT `fk_Kpi_CategoriaKpi1`
    FOREIGN KEY (`CategoriaKpi_id_categoria`)
    REFERENCES `capf`.`CategoriaKpi` (`id_categoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Kpi_MasterFranquia1`
    FOREIGN KEY (`MasterFranquia_Franqueado_id_franqueado`)
    REFERENCES `capf`.`MasterFranquia` (`Franqueado_id_franqueado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Kpi_CategoriaKpi1_idx` ON `capf`.`Kpi` (`CategoriaKpi_id_categoria` ASC) ;

CREATE INDEX `fk_Kpi_MasterFranquia1_idx` ON `capf`.`Kpi` (`MasterFranquia_Franqueado_id_franqueado` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`UsuarioFranqueado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`UsuarioFranqueado` ;

CREATE TABLE IF NOT EXISTS `capf`.`UsuarioFranqueado` (
  `Usuario_cpf` BIGINT(11) NOT NULL,
  `UsuarioMasterFranqueado_Usuario_cpf` BIGINT(11) NOT NULL,
  PRIMARY KEY (`Usuario_cpf`),
  CONSTRAINT `fk_UsuarioFranqueado_Usuario1`
    FOREIGN KEY (`Usuario_cpf`)
    REFERENCES `capf`.`Usuario` (`cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_UsuarioFranqueado_UsuarioMasterFranqueado1`
    FOREIGN KEY (`UsuarioMasterFranqueado_Usuario_cpf`)
    REFERENCES `capf`.`UsuarioMasterFranqueado` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_UsuarioFranqueado_UsuarioMasterFranqueado1_idx` ON `capf`.`UsuarioFranqueado` (`UsuarioMasterFranqueado_Usuario_cpf` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`Franquia`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Franquia` ;

CREATE TABLE IF NOT EXISTS `capf`.`Franquia` (
  `Franqueado_id_franqueado` INT NOT NULL,
  `creciRespTec` INT NULL,
  `nomeRespTec` VARCHAR(45) NULL,
  `cnpj` BIGINT(15) NULL,
  `email` VARCHAR(45) NULL,
  `whatsapp` INT NULL,
  `data_operacao` DATE NULL,
  `data_inauguracao` DATE NULL,
  `incMunicipal` BIGINT(15) NULL,
  `MasterFranquia_Franqueado_id_franqueado` INT NOT NULL,
  `RegiaoFranquia_id_RegiaoFranquiacol` INT NOT NULL,
  `UsuarioFranqueado_Usuario_cpf` BIGINT(11) NOT NULL,
  PRIMARY KEY (`Franqueado_id_franqueado`),
  CONSTRAINT `fk_Franquia_Franqueado1`
    FOREIGN KEY (`Franqueado_id_franqueado`)
    REFERENCES `capf`.`Franqueado` (`id_franqueado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Franquia_MasterFranquia1`
    FOREIGN KEY (`MasterFranquia_Franqueado_id_franqueado`)
    REFERENCES `capf`.`MasterFranquia` (`Franqueado_id_franqueado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Franquia_RegiaoFranquia1`
    FOREIGN KEY (`RegiaoFranquia_id_RegiaoFranquiacol`)
    REFERENCES `capf`.`RegiaoFranquia` (`id_RegiaoFranquiacol`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Franquia_UsuarioFranqueado1`
    FOREIGN KEY (`UsuarioFranqueado_Usuario_cpf`)
    REFERENCES `capf`.`UsuarioFranqueado` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Franquia_Franqueado1_idx` ON `capf`.`Franquia` (`Franqueado_id_franqueado` ASC) ;

CREATE INDEX `fk_Franquia_MasterFranquia1_idx` ON `capf`.`Franquia` (`MasterFranquia_Franqueado_id_franqueado` ASC) ;

CREATE INDEX `fk_Franquia_RegiaoFranquia1_idx` ON `capf`.`Franquia` (`RegiaoFranquia_id_RegiaoFranquiacol` ASC) ;

CREATE INDEX `fk_Franquia_UsuarioFranqueado1_idx` ON `capf`.`Franquia` (`UsuarioFranqueado_Usuario_cpf` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`RegistroKpi`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`RegistroKpi` ;

CREATE TABLE IF NOT EXISTS `capf`.`RegistroKpi` (
  `id_registro` INT NOT NULL AUTO_INCREMENT,
  `mesAnoReferencia` DATE NULL,
  `dataRegistro` DATE NULL,
  `dataEnvio` DATE NULL,
  `status` CHAR(1) NULL,
  `valorRegistro` DECIMAL NULL,
  `valorMeta` DECIMAL NULL,
  `Kpi_id_kpi` INT NOT NULL,
  `UsuarioFranqueado_Usuario_cpf` BIGINT(11) NOT NULL,
  `Franquia_Franqueado_id_franqueado` INT NOT NULL,
  PRIMARY KEY (`id_registro`),
  CONSTRAINT `fk_RegistroKpi_Kpi1`
    FOREIGN KEY (`Kpi_id_kpi`)
    REFERENCES `capf`.`Kpi` (`id_kpi`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RegistroKpi_UsuarioFranqueado1`
    FOREIGN KEY (`UsuarioFranqueado_Usuario_cpf`)
    REFERENCES `capf`.`UsuarioFranqueado` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RegistroKpi_Franquia1`
    FOREIGN KEY (`Franquia_Franqueado_id_franqueado`)
    REFERENCES `capf`.`Franquia` (`Franqueado_id_franqueado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_RegistroKpi_Kpi1_idx` ON `capf`.`RegistroKpi` (`Kpi_id_kpi` ASC) ;

CREATE INDEX `fk_RegistroKpi_UsuarioFranqueado1_idx` ON `capf`.`RegistroKpi` (`UsuarioFranqueado_Usuario_cpf` ASC) ;

CREATE INDEX `fk_RegistroKpi_Franquia1_idx` ON `capf`.`RegistroKpi` (`Franquia_Franqueado_id_franqueado` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`MovimentoKpi`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`MovimentoKpi` ;

CREATE TABLE IF NOT EXISTS `capf`.`MovimentoKpi` (
  `id_movimento` INT NOT NULL AUTO_INCREMENT,
  `mesAnoReferencia` DATE NULL,
  `dataConsolidado` DATE NULL,
  `valorRegistro` DECIMAL NULL,
  `valorMeta` DECIMAL NOT NULL,
  `RegistroKpi_id_registro` INT NOT NULL,
  `MasterFranquia_Franqueado_id_franqueado` INT NOT NULL,
  PRIMARY KEY (`id_movimento`),
  CONSTRAINT `fk_MovimentoKpi_RegistroKpi1`
    FOREIGN KEY (`RegistroKpi_id_registro`)
    REFERENCES `capf`.`RegistroKpi` (`id_registro`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MovimentoKpi_MasterFranquia1`
    FOREIGN KEY (`MasterFranquia_Franqueado_id_franqueado`)
    REFERENCES `capf`.`MasterFranquia` (`Franqueado_id_franqueado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_MovimentoKpi_RegistroKpi1_idx` ON `capf`.`MovimentoKpi` (`RegistroKpi_id_registro` ASC) ;

CREATE INDEX `fk_MovimentoKpi_MasterFranquia1_idx` ON `capf`.`MovimentoKpi` (`MasterFranquia_Franqueado_id_franqueado` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`RegiaoBrasil`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`RegiaoBrasil` ;

CREATE TABLE IF NOT EXISTS `capf`.`RegiaoBrasil` (
  `id_RegiaoBrasil` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NULL,
  `Adm_Usuario_cpf` BIGINT(11) NULL,
  PRIMARY KEY (`id_RegiaoBrasil`),
  CONSTRAINT `fk_RegiaoBrasil_Adm1`
    FOREIGN KEY (`Adm_Usuario_cpf`)
    REFERENCES `capf`.`Adm` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_RegiaoBrasil_Adm1_idx` ON `capf`.`RegiaoBrasil` (`Adm_Usuario_cpf` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`Estado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Estado` ;

CREATE TABLE IF NOT EXISTS `capf`.`Estado` (
  `id_estado` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NULL,
  `sigla` VARCHAR(45) NULL,
  `Adm_Usuario_cpf` BIGINT(11) NULL,
  `RegiaoBrasil_id_RegiaoBrasil1` INT NOT NULL,
  PRIMARY KEY (`id_estado`),
  CONSTRAINT `fk_Estado_Adm1`
    FOREIGN KEY (`Adm_Usuario_cpf`)
    REFERENCES `capf`.`Adm` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Estado_RegiaoBrasil2`
    FOREIGN KEY (`RegiaoBrasil_id_RegiaoBrasil1`)
    REFERENCES `capf`.`RegiaoBrasil` (`id_RegiaoBrasil`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Estado_Adm1_idx` ON `capf`.`Estado` (`Adm_Usuario_cpf` ASC) ;

CREATE INDEX `fk_Estado_RegiaoBrasil2_idx` ON `capf`.`Estado` (`RegiaoBrasil_id_RegiaoBrasil1` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`Cidade`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Cidade` ;

CREATE TABLE IF NOT EXISTS `capf`.`Cidade` (
  `id_cidade` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(30) NULL,
  `Adm_Usuario_cpf` BIGINT(11) NULL,
  `Estado_id_estado1` INT NOT NULL,
  PRIMARY KEY (`id_cidade`),
  CONSTRAINT `fk_Cidade_Adm1`
    FOREIGN KEY (`Adm_Usuario_cpf`)
    REFERENCES `capf`.`Adm` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Cidade_Estado2`
    FOREIGN KEY (`Estado_id_estado1`)
    REFERENCES `capf`.`Estado` (`id_estado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Cidade_Adm1_idx` ON `capf`.`Cidade` (`Adm_Usuario_cpf` ASC) ;

CREATE INDEX `fk_Cidade_Estado2_idx` ON `capf`.`Cidade` (`Estado_id_estado1` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`Bairro`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Bairro` ;

CREATE TABLE IF NOT EXISTS `capf`.`Bairro` (
  `id_bairro` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NULL,
  `Adm_Usuario_cpf` BIGINT(11) NULL,
  `Cidade_id_cidade1` INT NOT NULL,
  `RegiaoFranquia_id_RegiaoFranquiacol` INT NOT NULL,
  PRIMARY KEY (`id_bairro`),
  CONSTRAINT `fk_Bairro_Adm1`
    FOREIGN KEY (`Adm_Usuario_cpf`)
    REFERENCES `capf`.`Adm` (`Usuario_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Bairro_Cidade2`
    FOREIGN KEY (`Cidade_id_cidade1`)
    REFERENCES `capf`.`Cidade` (`id_cidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Bairro_RegiaoFranquia1`
    FOREIGN KEY (`RegiaoFranquia_id_RegiaoFranquiacol`)
    REFERENCES `capf`.`RegiaoFranquia` (`id_RegiaoFranquiacol`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Bairro_Adm1_idx` ON `capf`.`Bairro` (`Adm_Usuario_cpf` ASC) ;

CREATE INDEX `fk_Bairro_Cidade2_idx` ON `capf`.`Bairro` (`Cidade_id_cidade1` ASC) ;

CREATE INDEX `fk_Bairro_RegiaoFranquia1_idx` ON `capf`.`Bairro` (`RegiaoFranquia_id_RegiaoFranquiacol` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`Cidade_has_RegiaoFranquia`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Cidade_has_RegiaoFranquia` ;

CREATE TABLE IF NOT EXISTS `capf`.`Cidade_has_RegiaoFranquia` (
  `Cidade_id_cidade` INT NOT NULL,
  `RegiaoFranquia_id_RegiaoFranquiacol` INT NOT NULL,
  PRIMARY KEY (`Cidade_id_cidade`, `RegiaoFranquia_id_RegiaoFranquiacol`),
  CONSTRAINT `fk_Cidade_has_RegiaoFranquia_Cidade1`
    FOREIGN KEY (`Cidade_id_cidade`)
    REFERENCES `capf`.`Cidade` (`id_cidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Cidade_has_RegiaoFranquia_RegiaoFranquia1`
    FOREIGN KEY (`RegiaoFranquia_id_RegiaoFranquiacol`)
    REFERENCES `capf`.`RegiaoFranquia` (`id_RegiaoFranquiacol`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Cidade_has_RegiaoFranquia_RegiaoFranquia1_idx` ON `capf`.`Cidade_has_RegiaoFranquia` (`RegiaoFranquia_id_RegiaoFranquiacol` ASC) ;

CREATE INDEX `fk_Cidade_has_RegiaoFranquia_Cidade1_idx` ON `capf`.`Cidade_has_RegiaoFranquia` (`Cidade_id_cidade` ASC) ;


-- -----------------------------------------------------
-- Table `capf`.`Estado_has_RegiaoFranquia`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `capf`.`Estado_has_RegiaoFranquia` ;

CREATE TABLE IF NOT EXISTS `capf`.`Estado_has_RegiaoFranquia` (
  `Estado_id_estado` INT NOT NULL,
  `RegiaoFranquia_id_RegiaoFranquiacol` INT NOT NULL,
  PRIMARY KEY (`Estado_id_estado`, `RegiaoFranquia_id_RegiaoFranquiacol`),
  CONSTRAINT `fk_Estado_has_RegiaoFranquia_Estado1`
    FOREIGN KEY (`Estado_id_estado`)
    REFERENCES `capf`.`Estado` (`id_estado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Estado_has_RegiaoFranquia_RegiaoFranquia1`
    FOREIGN KEY (`RegiaoFranquia_id_RegiaoFranquiacol`)
    REFERENCES `capf`.`RegiaoFranquia` (`id_RegiaoFranquiacol`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Estado_has_RegiaoFranquia_RegiaoFranquia1_idx` ON `capf`.`Estado_has_RegiaoFranquia` (`RegiaoFranquia_id_RegiaoFranquiacol` ASC) ;

CREATE INDEX `fk_Estado_has_RegiaoFranquia_Estado1_idx` ON `capf`.`Estado_has_RegiaoFranquia` (`Estado_id_estado` ASC) ;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
